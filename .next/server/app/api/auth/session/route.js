"use strict";(()=>{var e={};e.id=603,e.ids=[603],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3263:e=>{e.exports=import("firebase-admin/app")},9637:e=>{e.exports=import("firebase-admin/auth")},7892:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>p,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>x,staticGenerationAsyncStorage:()=>d});var o=r(9303),n=r(8716),a=r(670),i=r(6184),c=e([i]);i=(c.then?(await c)():c)[0];let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/session/route",pathname:"/api/auth/session",filename:"route",bundlePath:"app/api/auth/session/route"},resolvedPagePath:"C:\\Users\\rratn\\OneDrive\\Documents\\GitHub\\deca\\app\\api\\auth\\session\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:x}=u,h="/api/auth/session/route";function p(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:d})}s()}catch(e){s(e)}})},6184:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{POST:()=>c});var o=r(1615),n=r(7070),a=r(7770),i=e([a]);async function c(e){try{let{idToken:t}=await e.json();if(!t)return console.log("No ID token provided"),n.NextResponse.json({error:"No ID token provided"},{status:400});try{if(!(await a.C.verifyIdToken(t)).email_verified)return console.log("Email not verified"),n.NextResponse.json({error:"Email not verified"},{status:401});let e=await a.C.createSessionCookie(t,{expiresIn:432e6});return(0,o.cookies)().set("session",e,{maxAge:432e6,httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}),console.log("Session cookie set successfully"),n.NextResponse.json({status:"success"})}catch(e){return console.error("Token verification error:",e),n.NextResponse.json({error:"Invalid token"},{status:401})}}catch(e){return console.error("Session creation error:",e),n.NextResponse.json({error:e.message},{status:500})}}a=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},7770:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{C:()=>i});var o=r(3263),n=r(9637),a=e([o,n]);if([o,n]=a.then?(await a)():a,!(0,o.getApps)().length)try{let e=JSON.parse(Buffer.from(process.env.FIREBASE_SERVICE_ACCOUNT_BASE64||"","base64").toString("utf8"));(0,o.initializeApp)({credential:(0,o.cert)(e)})}catch(e){console.error("Firebase admin initialization error:",e)}let i=(0,n.getAuth)();s()}catch(e){s(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[632,258,523,850,131,402,580,57,163,479,641,219,844,795,735,6,7,688,822,494],()=>r(7892));module.exports=s})();